<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ROUTEXA | Loads</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0b0f14;
  --panel:#121821;
  --accent:#2dd4bf;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --border:rgba(255,255,255,.08);
}
*{box-sizing:border-box;font-family:Inter,system-ui}
body{
  margin:0;background:var(--bg);color:var(--text);
  display:flex;height:100vh;
}
aside{
  width:240px;background:#0f1520;padding:20px;
  border-right:1px solid var(--border)
}
.logo{font-size:22px;font-weight:700;color:var(--accent);margin-bottom:30px}
nav a{
  display:block;padding:10px 14px;border-radius:8px;
  color:var(--muted);text-decoration:none
}
nav a.active{background:rgba(45,212,191,.1);color:var(--accent)}
main{flex:1;padding:26px}
header{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:24px
}

/* CARD STYLE */
.load-card{
  background:linear-gradient(180deg,#121821,#0d1320);
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
  margin-bottom:18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 20px 40px rgba(0,0,0,.35)
}
.load-info h3{
  margin:0 0 8px;font-size:16px;font-weight:600
}
.load-meta{font-size:13px;color:var(--muted)}

.btn{
  background:var(--accent);color:#000;
  border:none;border-radius:10px;
  padding:10px 18px;font-weight:600;cursor:pointer
}

.edit-btn{
  background:transparent;
  border:1px solid var(--accent);
  color:var(--accent);
  border-radius:10px;
  padding:8px 14px;
  cursor:pointer;
}

/* MODAL */
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);
  display:none;align-items:center;justify-content:center
}
.modal-content{
  width:360px;background:var(--panel);
  padding:26px;border-radius:16px
}
.modal-content input{
  width:100%;margin-bottom:12px;
  padding:10px;border-radius:8px;
  border:1px solid var(--border);
  background:#0f1520;color:white
}
</style>
</head>

<body>

<aside>
        <div class="logo">ROUTEXA</div>
        <nav>
            <a href="/manager">Dashboard</a>
            <a href="/manager/fleet">Fleet</a>
            <a href="/manager/loads">Loads</a>
            <a href="/manager/analytics" class="active">Analytics</a>
            <a href="/manager/alerts">Alerts</a>
        </nav>
    </aside>
<aside>
  <div class="logo">ROUTEXA</div>
  <nav>
    <a class="active">Loads</a>
  </nav>
</aside>

<main>
<header>
  <h1>Active Loads</h1>
  <button class="btn" onclick="openAdd()">+ New Load</button>
</header>

<div id="loadsContainer"></div>
</main>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h2 id="modalTitle">New Load</h2>
    <input id="title" placeholder="Load Title">
    <input id="from" placeholder="From Location">
    <input id="to" placeholder="To Location">
    <input id="price" placeholder="Revenue ($)">
    <button class="btn" onclick="saveLoad()">Save</button>
  </div>
</div>

<script>
const modal = document.getElementById("modal");
const container = document.getElementById("loadsContainer");
const modalTitle = document.getElementById("modalTitle");

let editIndex = null;

/* DEFAULT 4 LOADS */
const defaultLoads=[
 {title:"T1: Sand 8 ton",from:"Katraj",to:"Hinjawadi",price:"50"},
 {title:"T2: Cement 6 ton",from:"Hadapsar",to:"Chakan",price:"60"},
 {title:"T3: Gravel 7 ton",from:"Wagholi",to:"Talegaon",price:"70"},
];

if(!localStorage.getItem("loads")){
  localStorage.setItem("loads",JSON.stringify(defaultLoads));
}

function openAdd(){
  editIndex=null;
  modalTitle.innerText="New Load";
  title.value=from.value=to.value=price.value="";
  modal.style.display="flex";
}

function openEdit(index){
  const loads=JSON.parse(localStorage.getItem("loads"));
  const l=loads[index];
  editIndex=index;
  modalTitle.innerText="Edit Load";
  title.value=l.title;
  from.value=l.from;
  to.value=l.to;
  price.value=l.price;
  modal.style.display="flex";
}

modal.onclick=e=>{if(e.target===modal)modal.style.display="none"}

function saveLoad(){
  const loads=JSON.parse(localStorage.getItem("loads"));
  const data={
    title:title.value,
    from:from.value,
    to:to.value,
    price:price.value
  };

  if(editIndex!==null){
    loads[editIndex]=data;
  }else{
    loads.push(data);
  }

  localStorage.setItem("loads",JSON.stringify(loads.slice(-4)));
  modal.style.display="none";
  renderLoads();
}

function renderLoads(){
  const loads=JSON.parse(localStorage.getItem("loads"));
  container.innerHTML="";
  loads.forEach((l,i)=>{
    container.innerHTML+=`
    <div class="load-card">
      <div class="load-info">
        <h3>ðŸ“¦ ${l.title}</h3>
        <div class="load-meta">From <b>${l.from}</b> â†’ <b>${l.to}</b></div>
        <div class="load-meta" style="color:#34d399">Pending Assignment</div>
      </div>
      <div style="text-align:right">
        <div style="font-size:20px;font-weight:700">$${l.price}</div>
        <button class="edit-btn" onclick="openEdit(${i})">Edit</button>
      </div>
    </div>`;
  });
}
renderLoads();
</script>

</body>
</html>